<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Hemodiálisis - Semana 2</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="header-left">
                <h1>CENTRO DE HEMODIÁLISIS</h1>
                <p class="header-subtitle">Dashboard de Desempeño Operativo</p>
            </div>
            <div class="header-right">
                <div class="week-info">
                    <span class="week-label">SEMANA</span>
                    <span class="week-number">2</span>
                </div>
                <div class="date-info">
                    <span>04 al 10 de Enero 2026</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard Grid -->
    <main class="dashboard-grid">
        
        <!-- CLINICAL QUALITY -->
        <section class="dashboard-section clinical-quality">
            <div class="section-header">
                <h2>CALIDAD CLÍNICA</h2>
                <button class="btn-edit" data-section="clinical">Editar Datos</button>
            </div>
            <div class="section-content">
                <!-- Tasa de Infección -->
                <div class="metric-card">
                    <div class="metric-label">
                        Tasa de Infección
                        <span class="tooltip-icon" data-tooltip="Porcentaje de infecciones sobre sesiones realizadas">?</span>
                    </div>
                    <div class="metric-value" id="infection-rate">0.35<span class="metric-unit">%</span></div>
                    <div class="metric-comparison negative">
                        <span class="arrow">▼</span>
                        <span>Meta Semanal: menor a 0.50%</span>
                    </div>
                </div>

                <!-- Eventos Adversos -->
                <div class="metric-card">
                    <div class="metric-label">Eventos Adversos</div>
                    <div class="metric-value-large" id="adverse-events">2</div>
                    <div class="metric-badge today">Hoy</div>
                </div>

                <!-- Cumplimiento de Protocolos - Pendiente -->
                <div class="metric-card pending-card">
                    <div class="metric-label">Cumplimiento de Protocolos</div>
                    <div class="metric-value pending">--<span class="metric-unit">%</span></div>
                    <div class="metric-badge pending-badge">Pendiente</div>
                </div>

                <!-- Alarmas de Tratamiento -->
                <div class="metric-card">
                    <div class="metric-label">Alarmas de Tratamiento</div>
                    <div class="metric-value-large" id="treatment-alarms">4</div>
                    <div class="metric-status resolved">
                        <span class="check-icon">✓</span>
                        <span>Resueltas <strong>100%</strong> a Tiempo</span>
                    </div>
                </div>

                <!-- Gráfica de Eventos Adversos por Semana -->
                <div class="chart-card wide">
                    <div class="chart-header">
                        <h3>Eventos Adversos por Semana</h3>
                    </div>
                    <canvas id="adverseEventsChart"></canvas>
                </div>
            </div>
        </section>

        <!-- OPERATIONAL METRICS -->
        <section class="dashboard-section operational-metrics">
            <div class="section-header">
                <h2>MÉTRICAS OPERACIONALES</h2>
                <button class="btn-edit" data-section="operational">Editar Datos</button>
            </div>
            <div class="section-content">
                <!-- Utilización de Máquinas -->
                <div class="metric-card">
                    <div class="metric-label">
                        Utilización de Máquinas
                        <span class="tooltip-icon" data-tooltip="(Horas en Tratamiento / Horas Disponibles) × 100">?</span>
                    </div>
                    <div class="metric-value" id="machine-utilization">82<span class="metric-unit">%</span></div>
                    <div class="metric-comparison positive">
                        <span class="arrow">▲</span>
                        <span id="machine-util-comparison">vs Meta: 85%</span>
                    </div>
                </div>

                <!-- Inicios a Tiempo - Pendiente -->
                <div class="metric-card pending-card">
                    <div class="metric-label">Inicios a Tiempo</div>
                    <div class="metric-value pending">--<span class="metric-unit">%</span></div>
                    <div class="metric-badge pending-badge">Pendiente</div>
                </div>

                <!-- Cancelaciones / No-Shows -->
                <div class="metric-card">
                    <div class="metric-label">Cancelaciones / No-Shows</div>
                    <div class="metric-value-large complaints" id="cancellations">6</div>
                    <div class="metric-comparison negative">
                        <span class="arrow">▼</span>
                        <span>Última Semana</span>
                    </div>
                </div>

                <!-- Pacientes Activos -->
                <div class="metric-card">
                    <div class="metric-label">Pacientes Activos</div>
                    <div class="metric-value-large" id="active-patients-op">134</div>
                    <div class="metric-comparison positive">
                        <span class="arrow">▲</span>
                        <span id="active-patients-change">5 Esta Semana</span>
                    </div>
                </div>

                <!-- Capacidad de Utilización (Gauge) -->
                <div class="metric-card gauge-card">
                    <div class="metric-label">
                        Capacidad de Utilización
                        <span class="tooltip-icon" data-tooltip="(Sesiones Realizadas / Capacidad Máxima) × 100">?</span>
                    </div>
                    <div class="gauge-container">
                        <canvas id="operationalCapacityGauge"></canvas>
                        <div class="gauge-value">
                            <span id="op-capacity-percentage">88</span><span class="unit">%</span>
                        </div>
                        <div class="gauge-label" id="op-capacity-label">Excelente</div>
                    </div>
                </div>

                <!-- Gráfica de Pacientes Activos por Semana -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Pacientes Activos por Semana</h3>
                    </div>
                    <canvas id="activePatientsChart"></canvas>
                </div>

                <!-- Gráfica de Capacidad de Utilización por Semana -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Capacidad de Utilización por Semana</h3>
                    </div>
                    <canvas id="capacityUtilizationChart"></canvas>
                </div>
            </div>
        </section>

        <!-- PATIENT EXPERIENCE -->
        <section class="dashboard-section patient-experience">
            <div class="section-header">
                <h2>EXPERIENCIA DEL PACIENTE</h2>
                <button class="btn-edit" data-section="patient">Editar Datos</button>
            </div>
            <div class="section-content">
                <!-- Satisfacción General (NPS) -->
                <div class="metric-card nps-card">
                    <div class="metric-label">
                        Satisfacción General (NPS)
                        <span class="tooltip-icon" data-tooltip="Promedio de % Muy Satisfecho en las 3 categorías">?</span>
                    </div>
                    <div class="nps-gauge">
                        <canvas id="npsGauge"></canvas>
                        <div class="nps-value">
                            <span id="nps-score">87</span>
                        </div>
                    </div>
                    <div class="gauge-label" id="nps-label">Excelente</div>
                </div>

                <!-- Retención de Pacientes -->
                <div class="metric-card">
                    <div class="metric-label">
                        Retención de Pacientes
                        <span class="tooltip-icon" data-tooltip="(Pacientes Fin de Mes / Pacientes Actuales) × 100">?</span>
                    </div>
                    <div class="metric-value" id="patient-retention">97<span class="metric-unit">%</span></div>
                    <div class="metric-comparison positive">
                        <span class="arrow">▲</span>
                        <span>Mensual</span>
                    </div>
                </div>

                <!-- Amabilidad y Calidad -->
                <div class="chart-card satisfaction-chart">
                    <div class="chart-header">
                        <h3>Amabilidad y Calidad</h3>
                        <div class="chart-subtitle" id="amabilidad-total">Total: 13 encuestas</div>
                    </div>
                    <canvas id="amabilidadChart"></canvas>
                </div>

                <!-- Limpieza e Higiene -->
                <div class="chart-card satisfaction-chart">
                    <div class="chart-header">
                        <h3>Limpieza e Higiene</h3>
                        <div class="chart-subtitle" id="limpieza-total">Total: 13 encuestas</div>
                    </div>
                    <canvas id="limpiezaChart"></canvas>
                </div>

                <!-- Puntualidad -->
                <div class="chart-card satisfaction-chart">
                    <div class="chart-header">
                        <h3>Puntualidad</h3>
                        <div class="chart-subtitle" id="puntualidad-total">Total: 13 encuestas</div>
                    </div>
                    <canvas id="puntualidadChart"></canvas>
                </div>

                <!-- Comparativa de Satisfacción -->
                <div class="chart-card wide">
                    <div class="chart-header">
                        <h3>Comparativa de Satisfacción</h3>
                    </div>
                    <canvas id="satisfactionComparisonChart"></canvas>
                </div>
            </div>
        </section>

        <!-- FINANCIAL OVERVIEW -->
        <section class="dashboard-section financial-overview">
            <div class="section-header">
                <h2>PANORAMA FINANCIERO</h2>
                <button class="btn-edit" data-section="financial">Editar Datos</button>
            </div>
            <div class="section-content">
                <!-- Ingreso Por Sesión -->
                <div class="metric-card financial">
                    <div class="metric-label">
                        Ingreso Por Sesión
                        <span class="tooltip-icon" data-tooltip="Ingresos Totales / Sesiones Realizadas">?</span>
                    </div>
                    <div class="metric-value financial" id="revenue-session">$1,470</div>
                    <div class="metric-comparison">
                        <span id="revenue-session-comparison">Calculado automáticamente</span>
                    </div>
                </div>

                <!-- Costo Por Sesión -->
                <div class="metric-card financial">
                    <div class="metric-label">
                        Costo Por Sesión
                        <span class="tooltip-icon" data-tooltip="Valor editable ingresado manualmente">?</span>
                    </div>
                    <div class="metric-value financial" id="cost-session">$1,200</div>
                    <div class="metric-comparison">
                        <span>Editable</span>
                    </div>
                </div>

                <!-- Ingresos Semanales -->
                <div class="metric-card financial highlight">
                    <div class="metric-label">
                        Ingresos Semanales
                        <span class="tooltip-icon" data-tooltip="Suma total de ingresos de la semana">?</span>
                    </div>
                    <div class="metric-value financial large" id="weekly-revenue">$63,200</div>
                    <div class="metric-comparison positive">
                        <span class="arrow">▲</span>
                        <span id="weekly-revenue-comparison">vs Meta: $60,000</span>
                    </div>
                </div>

                <!-- Utilidad Neta -->
                <div class="metric-card financial highlight">
                    <div class="metric-label">
                        Utilidad Neta
                        <span class="tooltip-icon" data-tooltip="Ingresos - (Costos + Nómina + Servicios + Pólizas)">?</span>
                    </div>
                    <div class="metric-value financial large" id="net-profit">$15,000</div>
                    <div class="metric-comparison positive">
                        <span class="arrow">▲</span>
                        <span>Semanal</span>
                    </div>
                </div>

                <!-- Margen de Utilidad -->
                <div class="metric-card financial">
                    <div class="metric-label">
                        Margen de Utilidad
                        <span class="tooltip-icon" data-tooltip="(Utilidad Neta / Ingresos Totales) × 100">?</span>
                    </div>
                    <div class="metric-value" id="profit-margin">23.7<span class="metric-unit">%</span></div>
                    <div class="metric-comparison positive">
                        <span class="arrow">▲</span>
                        <span>Mensual</span>
                    </div>
                </div>

                <!-- Costo Total de Inventarios -->
                <div class="metric-card financial">
                    <div class="metric-label">
                        Costo Total Inventarios
                        <span class="tooltip-icon" data-tooltip="Suma de costos de inventario semanal">?</span>
                    </div>
                    <div class="metric-value financial" id="inventory-cost">$29,940</div>
                    <div class="metric-comparison">
                        <span>Esta Semana</span>
                    </div>
                </div>

                <!-- Tendencia de Ingresos y Costos -->
                <div class="chart-card wide financial-chart">
                    <div class="chart-header">
                        <h3>Tendencia de Ingresos y Costos</h3>
                    </div>
                    <canvas id="revenueCostChart"></canvas>
                </div>
            </div>
        </section>

    </main>

    <!-- Tooltip Container -->
    <div class="tooltip-container" id="tooltipContainer"></div>

    <!-- Modal 1: Clinical Quality -->
    <div class="modal" id="modalClinical">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Captura de Datos - Calidad Clínica</h2>
                <button class="modal-close" data-close="clinical">&times;</button>
            </div>
            
            <form id="formClinical" class="data-form">
                <!-- Tasa de Infección -->
                <div class="form-section">
                    <h3 class="form-section-title">Tasa de Infección</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="infection-rate-value">Tasa de Infección (%)</label>
                            <input type="number" id="infection-rate-value" name="infection-rate-value" step="0.01" min="0" value="0.35" required>
                        </div>
                        <div class="form-field">
                            <label for="infection-rate-goal">Meta Semanal (%)</label>
                            <input type="number" id="infection-rate-goal" name="infection-rate-goal" step="0.01" min="0" value="0.50" required>
                        </div>
                    </div>
                </div>

                <!-- Eventos Adversos por Día -->
                <div class="form-section">
                    <h3 class="form-section-title">Eventos Adversos por Día</h3>
                    <div class="sessions-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Lunes</th>
                                    <th>Martes</th>
                                    <th>Miércoles</th>
                                    <th>Jueves</th>
                                    <th>Viernes</th>
                                    <th>Sábado</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><input type="number" id="adverse-mon" name="adverse-mon" min="0" value="0" required></td>
                                    <td><input type="number" id="adverse-tue" name="adverse-tue" min="0" value="1" required></td>
                                    <td><input type="number" id="adverse-wed" name="adverse-wed" min="0" value="0" required></td>
                                    <td><input type="number" id="adverse-thu" name="adverse-thu" min="0" value="0" required></td>
                                    <td><input type="number" id="adverse-fri" name="adverse-fri" min="0" value="1" required></td>
                                    <td><input type="number" id="adverse-sat" name="adverse-sat" min="0" value="0" required></td>
                                    <td class="total-cell"><strong id="adverse-week-total">2</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Alarmas de Tratamiento -->
                <div class="form-section">
                    <h3 class="form-section-title">Alarmas de Tratamiento</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="alarms-total">Total de Alarmas</label>
                            <input type="number" id="alarms-total" name="alarms-total" step="1" min="0" value="4" required>
                        </div>
                        <div class="form-field">
                            <label for="alarms-resolved-pct">Porcentaje Resueltas a Tiempo (%)</label>
                            <input type="number" id="alarms-resolved-pct" name="alarms-resolved-pct" step="1" min="0" max="100" value="100" required>
                        </div>
                    </div>
                </div>

                <!-- Datos Históricos de Eventos Adversos -->
                <div class="form-section">
                    <h3 class="form-section-title">Datos Históricos - Eventos Adversos por Semana</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="num-weeks">Número de Semanas a Mostrar</label>
                            <input type="number" id="num-weeks" name="num-weeks" step="1" min="2" max="12" value="2" required>
                        </div>
                    </div>
                    
                    <div id="weekly-adverse-container" style="margin-top: 1rem;">
                        <div class="form-grid">
                            <div class="form-field">
                                <label for="adverse-week-1">Semana 1</label>
                                <input type="number" id="adverse-week-1" name="adverse-week-1" step="1" min="0" value="3" required>
                            </div>
                            <div class="form-field">
                                <label for="adverse-week-2">Semana 2</label>
                                <input type="number" id="adverse-week-2" name="adverse-week-2" step="1" min="0" value="2" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-cancel="clinical">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar y Actualizar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal 2: Operational Metrics -->
    <div class="modal" id="modalOperational">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Captura de Datos - Métricas Operacionales</h2>
                <button class="modal-close" data-close="operational">&times;</button>
            </div>
            
            <form id="formOperational" class="data-form">
                <!-- Utilización de Máquinas -->
                <div class="form-section">
                    <h3 class="form-section-title">Utilización de Máquinas</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="hours-treatment">Horas en Tratamiento</label>
                            <input type="number" id="hours-treatment" name="hours-treatment" step="0.1" min="0" value="164" required>
                        </div>
                        <div class="form-field">
                            <label for="hours-available">Horas Disponibles</label>
                            <input type="number" id="hours-available" name="hours-available" step="0.1" min="0" value="200" required>
                        </div>
                        <div class="form-field">
                            <label for="machine-util-target">Meta de Utilización (%)</label>
                            <input type="number" id="machine-util-target" name="machine-util-target" step="1" min="0" max="100" value="85" required>
                        </div>
                    </div>
                </div>

                <!-- Cancelaciones y Pacientes -->
                <div class="form-section">
                    <h3 class="form-section-title">Cancelaciones y Pacientes Activos</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="cancellations-count">Cancelaciones / No-Shows</label>
                            <input type="number" id="cancellations-count" name="cancellations-count" step="1" min="0" value="6" required>
                        </div>
                        <div class="form-field">
                            <label for="active-patients-current">Pacientes Activos Esta Semana</label>
                            <input type="number" id="active-patients-current" name="active-patients-current" step="1" min="0" value="134" required>
                        </div>
                        <div class="form-field">
                            <label for="active-patients-previous">Pacientes Activos Semana Anterior</label>
                            <input type="number" id="active-patients-previous" name="active-patients-previous" step="1" min="0" value="129" required>
                        </div>
                    </div>
                </div>

                <!-- Capacidad de Utilización -->
                <div class="form-section">
                    <h3 class="form-section-title">Capacidad de Utilización</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="sessions-realized-op">Sesiones Realizadas</label>
                            <input type="number" id="sessions-realized-op" name="sessions-realized-op" step="1" min="0" value="350" required>
                        </div>
                        <div class="form-field">
                            <label for="max-capacity-op">Capacidad Máxima de Sesiones</label>
                            <input type="number" id="max-capacity-op" name="max-capacity-op" step="1" min="1" value="400" required>
                        </div>
                    </div>
                </div>

                <!-- Datos Históricos - Pacientes Activos -->
                <div class="form-section">
                    <h3 class="form-section-title">Datos Históricos - Pacientes Activos por Semana</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="num-weeks-patients">Número de Semanas a Mostrar</label>
                            <input type="number" id="num-weeks-patients" name="num-weeks-patients" step="1" min="2" max="12" value="4" required>
                        </div>
                    </div>
                    
                    <div id="weekly-patients-container" style="margin-top: 1rem;">
                        <div class="form-grid">
                            <div class="form-field">
                                <label for="patients-week-1">Semana 1</label>
                                <input type="number" id="patients-week-1" name="patients-week-1" step="1" min="0" value="125" required>
                            </div>
                            <div class="form-field">
                                <label for="patients-week-2">Semana 2</label>
                                <input type="number" id="patients-week-2" name="patients-week-2" step="1" min="0" value="128" required>
                            </div>
                            <div class="form-field">
                                <label for="patients-week-3">Semana 3</label>
                                <input type="number" id="patients-week-3" name="patients-week-3" step="1" min="0" value="129" required>
                            </div>
                            <div class="form-field">
                                <label for="patients-week-4">Semana 4</label>
                                <input type="number" id="patients-week-4" name="patients-week-4" step="1" min="0" value="134" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Datos Históricos - Capacidad de Utilización -->
                <div class="form-section">
                    <h3 class="form-section-title">Datos Históricos - Capacidad de Utilización por Semana</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="num-weeks-capacity">Número de Semanas a Mostrar</label>
                            <input type="number" id="num-weeks-capacity" name="num-weeks-capacity" step="1" min="2" max="12" value="4" required>
                        </div>
                    </div>
                    
                    <div id="weekly-capacity-container" style="margin-top: 1rem;">
                        <div class="form-grid">
                            <div class="form-field">
                                <label for="capacity-week-1">Semana 1 (%)</label>
                                <input type="number" id="capacity-week-1" name="capacity-week-1" step="0.1" min="0" max="100" value="82" required>
                            </div>
                            <div class="form-field">
                                <label for="capacity-week-2">Semana 2 (%)</label>
                                <input type="number" id="capacity-week-2" name="capacity-week-2" step="0.1" min="0" max="100" value="85" required>
                            </div>
                            <div class="form-field">
                                <label for="capacity-week-3">Semana 3 (%)</label>
                                <input type="number" id="capacity-week-3" name="capacity-week-3" step="0.1" min="0" max="100" value="87" required>
                            </div>
                            <div class="form-field">
                                <label for="capacity-week-4">Semana 4 (%)</label>
                                <input type="number" id="capacity-week-4" name="capacity-week-4" step="0.1" min="0" max="100" value="88" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-cancel="operational">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar y Actualizar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal 3: Patient Experience -->
    <div class="modal" id="modalPatient">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Captura de Datos - Experiencia del Paciente</h2>
                <button class="modal-close" data-close="patient">&times;</button>
            </div>
            
            <form id="formPatient" class="data-form">
                <div class="form-section">
                    <h3 class="form-section-title">Amabilidad y Calidad</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="amabilidad-insatisfecho">Insatisfecho</label>
                            <input type="number" id="amabilidad-insatisfecho" name="amabilidad-insatisfecho" step="1" min="0" value="0" required>
                        </div>
                        <div class="form-field">
                            <label for="amabilidad-satisfecho">Satisfecho</label>
                            <input type="number" id="amabilidad-satisfecho" name="amabilidad-satisfecho" step="1" min="0" value="2" required>
                        </div>
                        <div class="form-field">
                            <label for="amabilidad-muy-satisfecho">Muy Satisfecho</label>
                            <input type="number" id="amabilidad-muy-satisfecho" name="amabilidad-muy-satisfecho" step="1" min="0" value="11" required>
                        </div>
                    </div>

                    <h3 class="form-section-title" style="margin-top: 2rem;">Limpieza e Higiene</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="limpieza-insatisfecho">Insatisfecho</label>
                            <input type="number" id="limpieza-insatisfecho" name="limpieza-insatisfecho" step="1" min="0" value="0" required>
                        </div>
                        <div class="form-field">
                            <label for="limpieza-satisfecho">Satisfecho</label>
                            <input type="number" id="limpieza-satisfecho" name="limpieza-satisfecho" step="1" min="0" value="4" required>
                        </div>
                        <div class="form-field">
                            <label for="limpieza-muy-satisfecho">Muy Satisfecho</label>
                            <input type="number" id="limpieza-muy-satisfecho" name="limpieza-muy-satisfecho" step="1" min="0" value="9" required>
                        </div>
                    </div>

                    <h3 class="form-section-title" style="margin-top: 2rem;">Puntualidad</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="puntualidad-insatisfecho">Insatisfecho</label>
                            <input type="number" id="puntualidad-insatisfecho" name="puntualidad-insatisfecho" step="1" min="0" value="0" required>
                        </div>
                        <div class="form-field">
                            <label for="puntualidad-satisfecho">Satisfecho</label>
                            <input type="number" id="puntualidad-satisfecho" name="puntualidad-satisfecho" step="1" min="0" value="5" required>
                        </div>
                        <div class="form-field">
                            <label for="puntualidad-muy-satisfecho">Muy Satisfecho</label>
                            <input type="number" id="puntualidad-muy-satisfecho" name="puntualidad-muy-satisfecho" step="1" min="0" value="8" required>
                        </div>
                    </div>

                    <h3 class="form-section-title" style="margin-top: 2rem;">Retención de Pacientes</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="patients-current">Pacientes Activos Actuales</label>
                            <input type="number" id="patients-current" name="patients-current" step="1" min="0" value="134" required>
                        </div>
                        <div class="form-field">
                            <label for="patients-end-month">Pacientes Activos Fin de Mes</label>
                            <input type="number" id="patients-end-month" name="patients-end-month" step="1" min="0" value="130" required>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-cancel="patient">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar y Actualizar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal 4: Financial Overview -->
    <div class="modal" id="modalFinancial">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Captura de Datos - Panorama Financiero</h2>
                <button class="modal-close" data-close="financial">&times;</button>
            </div>
            
            <form id="formFinancial" class="data-form">
                <!-- Ingresos y Datos Generales -->
                <div class="form-section">
                    <h3 class="form-section-title">Datos Generales</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="total-revenue-fin">Ingresos Totales Semana ($)</label>
                            <input type="number" id="total-revenue-fin" name="total-revenue-fin" step="0.01" min="0" value="63200" required>
                        </div>
                        <div class="form-field">
                            <label for="cost-per-session">Costo Por Sesión ($)</label>
                            <input type="number" id="cost-per-session" name="cost-per-session" step="0.01" min="0" value="1200" required>
                        </div>
                        <div class="form-field">
                            <label for="target-revenue-fin">Meta Semanal ($)</label>
                            <input type="number" id="target-revenue-fin" name="target-revenue-fin" step="0.01" min="0" value="60000" required>
                        </div>
                    </div>
                </div>

                <!-- Gastos Operativos -->
                <div class="form-section">
                    <h3 class="form-section-title">Gastos Operativos</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="payroll-operations">Nómina Operativos ($)</label>
                            <input type="number" id="payroll-operations" name="payroll-operations" step="0.01" min="0" value="0" required>
                        </div>
                        <div class="form-field">
                            <label for="payroll-admin">Nómina Administrativos ($)</label>
                            <input type="number" id="payroll-admin" name="payroll-admin" step="0.01" min="0" value="0" required>
                        </div>
                        <div class="form-field">
                            <label for="general-services">Servicios Generales ($)</label>
                            <input type="number" id="general-services" name="general-services" step="0.01" min="0" value="0" required>
                        </div>
                        <div class="form-field">
                            <label for="insurance-policies">Pólizas ($)</label>
                            <input type="number" id="insurance-policies" name="insurance-policies" step="0.01" min="0" value="0" required>
                        </div>
                    </div>
                </div>

                <!-- Tabla de Inventarios -->
                <div class="form-section">
                    <h3 class="form-section-title">Inventario de Insumos - Sesiones Semanales</h3>
                    <div class="inventory-table-container">
                        <table class="inventory-table">
                            <thead>
                                <tr>
                                    <th>Descripción</th>
                                    <th>N° Unidades</th>
                                    <th>$ Precio Unitario</th>
                                    <th>$ Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Filtro</td>
                                    <td><input type="number" class="inv-qty" data-item="filtro" step="1" min="0" value="38"></td>
                                    <td><input type="number" class="inv-price" data-item="filtro" step="0.01" min="0" value="80.00"></td>
                                    <td class="inv-total" id="total-filtro">$3,040.00</td>
                                </tr>
                                <tr>
                                    <td>Heparina</td>
                                    <td><input type="number" class="inv-qty" data-item="heparina" step="1" min="0" value="24"></td>
                                    <td><input type="number" class="inv-price" data-item="heparina" step="0.01" min="0" value="70.00"></td>
                                    <td class="inv-total" id="total-heparina">$1,680.00</td>
                                </tr>
                                <tr>
                                    <td>Ácido potasio</td>
                                    <td><input type="number" class="inv-qty" data-item="acido-potasio" step="1" min="0" value="26"></td>
                                    <td><input type="number" class="inv-price" data-item="acido-potasio" step="0.01" min="0" value="50.00"></td>
                                    <td class="inv-total" id="total-acido-potasio">$1,300.00</td>
                                </tr>
                                <tr>
                                    <td>Bicarbonato</td>
                                    <td><input type="number" class="inv-qty" data-item="bicarbonato" step="1" min="0" value="33"></td>
                                    <td><input type="number" class="inv-price" data-item="bicarbonato" step="0.01" min="0" value="30.00"></td>
                                    <td class="inv-total" id="total-bicarbonato">$990.00</td>
                                </tr>
                                <tr>
                                    <td>Líneas</td>
                                    <td><input type="number" class="inv-qty" data-item="lineas" step="1" min="0" value="38"></td>
                                    <td><input type="number" class="inv-price" data-item="lineas" step="0.01" min="0" value="5.00"></td>
                                    <td class="inv-total" id="total-lineas">$190.00</td>
                                </tr>
                                <tr>
                                    <td>Kit Catéter</td>
                                    <td><input type="number" class="inv-qty" data-item="kit-cateter" step="1" min="0" value="29"></td>
                                    <td><input type="number" class="inv-price" data-item="kit-cateter" step="0.01" min="0" value="10.00"></td>
                                    <td class="inv-total" id="total-kit-cateter">$290.00</td>
                                </tr>
                                <tr>
                                    <td>Solución Fisiológica 1000ml</td>
                                    <td><input type="number" class="inv-qty" data-item="solucion-fisio" step="1" min="0" value="38"></td>
                                    <td><input type="number" class="inv-price" data-item="solucion-fisio" step="0.01" min="0" value="20.00"></td>
                                    <td class="inv-total" id="total-solucion-fisio">$760.00</td>
                                </tr>
                                <tr>
                                    <td>Ácido Cítrico</td>
                                    <td><input type="number" class="inv-qty" data-item="acido-citrico" step="1" min="0" value="3"></td>
                                    <td><input type="number" class="inv-price" data-item="acido-citrico" step="0.01" min="0" value="20.00"></td>
                                    <td class="inv-total" id="total-acido-citrico">$60.00</td>
                                </tr>
                                <tr>
                                    <td>Clorhexedina solución 2%</td>
                                    <td><input type="number" class="inv-qty" data-item="clorhexedina" step="1" min="0" value="1"></td>
                                    <td><input type="number" class="inv-price" data-item="clorhexedina" step="0.01" min="0" value="10.00"></td>
                                    <td class="inv-total" id="total-clorhexedina">$10.00</td>
                                </tr>
                                <tr>
                                    <td>Normogotero</td>
                                    <td><input type="number" class="inv-qty" data-item="normogotero" step="1" min="0" value="23"></td>
                                    <td><input type="number" class="inv-price" data-item="normogotero" step="0.01" min="0" value="90.00"></td>
                                    <td class="inv-total" id="total-normogotero">$2,070.00</td>
                                </tr>
                                <tr>
                                    <td>Jeringa 10 ml</td>
                                    <td><input type="number" class="inv-qty" data-item="jeringa-10" step="1" min="0" value="38"></td>
                                    <td><input type="number" class="inv-price" data-item="jeringa-10" step="0.01" min="0" value="100.00"></td>
                                    <td class="inv-total" id="total-jeringa-10">$3,800.00</td>
                                </tr>
                                <tr>
                                    <td>Aguja arterial</td>
                                    <td><input type="number" class="inv-qty" data-item="aguja-arterial" step="1" min="0" value="7"></td>
                                    <td><input type="number" class="inv-price" data-item="aguja-arterial" step="0.01" min="0" value="150.00"></td>
                                    <td class="inv-total" id="total-aguja-arterial">$1,050.00</td>
                                </tr>
                                <tr>
                                    <td>Aguja venosa</td>
                                    <td><input type="number" class="inv-qty" data-item="aguja-venosa" step="1" min="0" value="8"></td>
                                    <td><input type="number" class="inv-price" data-item="aguja-venosa" step="0.01" min="0" value="200.00"></td>
                                    <td class="inv-total" id="total-aguja-venosa">$1,600.00</td>
                                </tr>
                                <tr>
                                    <td>Aguja Hipo 20x32</td>
                                    <td><input type="number" class="inv-qty" data-item="aguja-hipo" step="1" min="0" value="28"></td>
                                    <td><input type="number" class="inv-price" data-item="aguja-hipo" step="0.01" min="0" value="250.00"></td>
                                    <td class="inv-total" id="total-aguja-hipo">$7,000.00</td>
                                </tr>
                                <tr>
                                    <td>Kit de fistula</td>
                                    <td><input type="number" class="inv-qty" data-item="kit-fistula" step="1" min="0" value="6"></td>
                                    <td><input type="number" class="inv-price" data-item="kit-fistula" step="0.01" min="0" value="1000.00"></td>
                                    <td class="inv-total" id="total-kit-fistula">$6,000.00</td>
                                </tr>
                                <tr>
                                    <td>Jabón clorhex</td>
                                    <td><input type="number" class="inv-qty" data-item="jabon-clorhex" step="1" min="0" value="1"></td>
                                    <td><input type="number" class="inv-price" data-item="jabon-clorhex" step="0.01" min="0" value="100.00"></td>
                                    <td class="inv-total" id="total-jabon-clorhex">$100.00</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class="total-row">
                                    <td colspan="3"><strong>COSTO TOTAL INVENTARIOS</strong></td>
                                    <td><strong id="inventory-grand-total">$29,940.00</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-cancel="financial">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar y Actualizar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>